{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["// Original module: https://github.com/jshttp/etag/blob/master/index.js\n\nimport { createHash } from 'node:crypto'\nimport { Stats } from 'node:fs'\n\nconst entityTag = (entity: string | Buffer): string => {\n  if (entity.length === 0) {\n    // fast-path empty\n    return '\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'\n  }\n  // generate hash\n  const hash = createHash('sha1')\n    .update(entity as string, 'utf8')\n    .digest('base64')\n    .substring(0, 27)\n\n  const len = typeof entity === 'string' ? Buffer.byteLength(entity, 'utf8') : entity.length\n\n  return `\"${len.toString(16)}-${hash}\"`\n}\n\nconst statTag = ({ mtime, size }: Stats): string => {\n  return `\"${mtime.getTime().toString(16)}-${size.toString(16)}\"`\n}\n\nexport const eTag = (entity: string | Buffer | Stats, options?: { weak: boolean }): string => {\n  if (entity == null) throw new TypeError('argument entity is required')\n\n  const weak = options?.weak || entity instanceof Stats\n\n  // generate entity tag\n\n  const tag = entity instanceof Stats ? statTag(entity) : entityTag(entity)\n\n  return weak ? `W/${tag}` : tag\n}\n"],"names":[],"mappings":";;AAKA,MAAM,YAAY,CAAC,WAAoC;AACjD,MAAA,OAAO,WAAW,GAAG;AAEhB,WAAA;AAAA,EACT;AAEA,QAAM,OAAO,WAAW,MAAM,EAC3B,OAAO,QAAkB,MAAM,EAC/B,OAAO,QAAQ,EACf,UAAU,GAAG,EAAE;AAEZ,QAAA,MAAM,OAAO,WAAW,WAAW,OAAO,WAAW,QAAQ,MAAM,IAAI,OAAO;AAEpF,SAAO,IAAI,IAAI,SAAS,EAAE,CAAC,IAAI,IAAI;AACrC;AAEA,MAAM,UAAU,CAAC,EAAE,OAAO,WAA0B;AAC3C,SAAA,IAAI,MAAM,QAAA,EAAU,SAAS,EAAE,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;AAC9D;AAEa,MAAA,OAAO,CAAC,QAAiC,YAAwC;AAC5F,MAAI,UAAU,KAAY,OAAA,IAAI,UAAU,6BAA6B;AAE/D,QAAA,QAAO,mCAAS,SAAQ,kBAAkB;AAIhD,QAAM,MAAM,kBAAkB,QAAQ,QAAQ,MAAM,IAAI,UAAU,MAAM;AAEjE,SAAA,OAAO,KAAK,GAAG,KAAK;AAC7B;"}